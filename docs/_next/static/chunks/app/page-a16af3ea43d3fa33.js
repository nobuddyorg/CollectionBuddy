(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{101:(e,t,a)=>{"use strict";a.d(t,{g:()=>n,I18nProvider:()=>i});var r=a(5155),l=a(2115);let s={de:JSON.parse('{"page":{"entries":"Eintr\xe4ge","choose_category":"Kategorie w\xe4hlen","add_collectibles":"Dann kannst du neue Sammlerst\xfccke hinzuf\xfcgen und Bilder hochladen.","footer":"Sammeln • Ordnen • Behalten"},"header":{"title":"CollectionBuddy","sign_out":"Sign out"},"category_select":{"title":"Kategorie","select_placeholder":"Kategorie w\xe4hlen oder erstellen","new_category":"Neue Kategorie","add":"Hinzuf\xfcgen","delete":"Kategorie l\xf6schen","confirm_delete":"Diese Kategorie wirklich l\xf6schen?","load_error":"Kategorien konnten nicht geladen werden.","create_error":"Kategorie konnte nicht erstellt werden.","delete_error":"Kategorie konnte nicht gel\xf6scht werden.","open_category":"Kategorie \xf6ffnen"},"item_create":{"new_entry":"Neuer Eintrag","title":"Titel","description":"Beschreibung","place_placeholder":"Ort (z. B. K\xf6ln)","searching":"Suche…","no_results":"Keine Treffer","remove_tag":"Tag {tag} entfernen","tags_placeholder":"Tags eingeben… (Enter/Komma)","adding":"F\xfcge hinzu…","add":"Hinzuf\xfcgen"},"item_list":{"confirm_delete":"Diesen Gegenstand l\xf6schen?","delete":"L\xf6schen","no_user_session":"Keine Benutzersitzung","uploading":"Lade hoch…","add_image":"Bild hinzuf\xfcgen","image_alt":"Bild {idx}","loading":"Lade…","no_images":"Keine Bilder","previous":"Zur\xfcck","next":"Weiter"},"google_sign_in_button":{"sign_in_with_google":"Mit Google anmelden"},"login_page":{"circle_text":"CollectionBuddy • Sammeln • Ordnen • Behalten • Deine Sch\xe4tze im Blick • ","checking_login":"Anmeldung wird gepr\xfcft…","title_collection":"Collection","title_buddy":"Buddy","subtitle":"Dein digitales Sammelalbum f\xfcr M\xfcnzen, Pl\xfcschtiere, Briefmarken und alles, was dir am Herzen liegt."},"layout":{"description":"Sammeln • Ordnen • Behalten"}}'),en:JSON.parse('{"page":{"entries":"Entries","choose_category":"Choose category","add_collectibles":"Then you can add new collectibles and upload pictures.","footer":"Collect • Organize • Keep"},"header":{"title":"CollectionBuddy","sign_out":"Sign out"},"category_select":{"title":"Category","select_placeholder":"Select or create category","new_category":"New category","add":"Add","delete":"Delete category","confirm_delete":"Really delete this category?","load_error":"Could not load categories.","create_error":"Could not create category.","delete_error":"Could not delete category.","open_category":"Open category"},"item_create":{"new_entry":"New entry","title":"Title","description":"Description","place_placeholder":"Place (e.g. Cologne)","searching":"Searching…","no_results":"No results","remove_tag":"Remove tag {tag}","tags_placeholder":"Enter tags… (Enter/Comma)","adding":"Adding…","add":"Add"},"item_list":{"confirm_delete":"Delete this item?","delete":"Delete","no_user_session":"No user session","uploading":"Uploading…","add_image":"Add image","image_alt":"Image {idx}","loading":"Loading…","no_images":"No images","previous":"Previous","next":"Next"},"google_sign_in_button":{"sign_in_with_google":"Sign in with Google"},"login_page":{"circle_text":"CollectionBuddy • Collect • Organize • Keep • Your treasures at a glance • ","checking_login":"Checking login…","title_collection":"Collection","title_buddy":"Buddy","subtitle":"Your digital scrapbook for coins, stuffed animals, stamps and everything you love."},"layout":{"description":"Collect • Organize • Keep"}}')},n=(0,l.createContext)(void 0),i=e=>{let{children:t}=e,[a,i]=(0,l.useState)("de");(0,l.useEffect)(()=>{let e=navigator.language.split("-")[0];e in s&&i(e)},[]);let o=(0,l.useCallback)(e=>{let t=e.split("."),r=s[a];for(let a of t)if(!r||"object"!=typeof r||!(a in r))return e;else r=r[a];return r},[a]);return(0,r.jsx)(n.Provider,{value:{lang:a,setLang:i,t:o},children:t})}},1915:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>h});var r=a(5155),l=a(2115),s=a(5983),n=a(5695),i=a(2184),o=a(5875);function c(e){let{selectedCat:t,onSelect:a}=e,{t:n}=(0,o.s)(),[i,c]=(0,l.useState)([]),[d,u]=(0,l.useState)(""),[g,m]=(0,l.useState)(!1),[h,p]=(0,l.useState)(!1),[x,b]=(0,l.useState)(!1),[f,y]=(0,l.useState)(!t);(0,l.useEffect)(()=>{y(!t)},[t]);let v=(0,l.useMemo)(()=>[...i].sort((e,t)=>e.name.localeCompare(t.name,"de",{sensitivity:"base"})),[i]),_=(0,l.useMemo)(()=>{var e;return t&&null!=(e=i.find(e=>e.id===t))?e:null},[i,t]),w=(0,l.useCallback)(async()=>{m(!0);try{let{data:e,error:t}=await s.N.from("categories").select("id,name");if(t)throw t;c(null!=e?e:[])}catch(e){console.error(e),alert(n("category_select.loadError"))}finally{m(!1)}},[n]);(0,l.useEffect)(()=>{w()},[w]);let k=async()=>{let e=d.trim();if(e&&!h){p(!0);try{let{data:t,error:r}=await s.N.from("categories").insert({name:e}).select("id,name").single();if(r)throw r;u(""),await w(),(null==t?void 0:t.id)&&(a(t.id),y(!1))}catch(e){console.error(e),alert(n("category_select.createError"))}finally{p(!1)}}},N=async()=>{if(t&&!x&&confirm(n("category_select.confirmDelete"))){b(!0);try{let{error:e}=await s.N.from("categories").delete().eq("id",t);if(e)throw e;a(null),await w(),y(!0)}catch(e){console.error(e),alert(n("category_select.deleteError"))}finally{b(!1)}}};return!f&&_?(0,r.jsxs)("section",{className:"rounded-2xl border bg-white/70 dark:bg-neutral-900/60 backdrop-blur shadow-sm p-4 sm:p-5 flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"truncate",children:[(0,r.jsx)("h2",{className:"text-base font-semibold mb-1",children:n("category_select.title")}),(0,r.jsx)("div",{className:"font-medium truncate",children:_.name})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("button",{onClick:N,disabled:x,className:"rounded-full w-9 h-9 flex items-center justify-center border text-red-600 border-red-500/40 bg-white/60 dark:bg-neutral-800/70 hover:bg-red-50 dark:hover:bg-red-950/30 disabled:opacity-60","aria-label":n("category_select.delete"),title:n("category_select.delete"),children:(0,r.jsxs)("svg",{viewBox:"0 0 24 24",className:"w-5 h-5","aria-hidden":"true",children:[(0,r.jsx)("path",{d:"M3 6h18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),(0,r.jsx)("path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),(0,r.jsx)("path",{d:"M6 6l1 14a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2l1-14",stroke:"currentColor",strokeWidth:"2",fill:"none"}),(0,r.jsx)("path",{d:"M10 11v6M14 11v6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]})}),(0,r.jsx)("button",{onClick:()=>y(!0),className:"rounded-full w-9 h-9 flex items-center justify-center border bg-white/60 dark:bg-neutral-800/70 hover:bg-neutral-100 dark:hover:bg-neutral-700","aria-label":n("category_select.open_category"),title:n("category_select.open_category"),children:"+"})]})]}):(0,r.jsxs)("section",{className:"rounded-2xl border bg-white/70 dark:bg-neutral-900/60 backdrop-blur shadow-sm p-4 sm:p-5 space-y-3",children:[(0,r.jsx)("h2",{className:"text-base font-semibold",children:n("category_select.title")}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("select",{value:null!=t?t:"",onChange:e=>{let t=e.target.value||null;a(t),t&&y(!1)},disabled:g,className:"w-full appearance-none rounded-xl border px-3 py-2 pr-10 bg-white/60 dark:bg-neutral-800/70 outline-none ring-0 focus:border-neutral-400 dark:focus:border-neutral-600 transition","aria-label":n("category_select.select_placeholder"),children:[(0,r.jsx)("option",{value:"",children:n("category_select.select_placeholder")}),v.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,r.jsx)("span",{className:"pointer-events-none absolute right-3 top-1/2 -translate-y-1/2 text-sm opacity-70",children:"▾"})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("input",{value:d,onChange:e=>u(e.target.value),placeholder:n("category_select.new_category"),onKeyDown:e=>{"Enter"===e.key&&k(),"Escape"===e.key&&y(!1)},className:"flex-1 rounded-xl border px-3 py-2 bg-white/60 dark:bg-neutral-800/70 outline-none focus:border-neutral-400 dark:focus:border-neutral-600"}),(0,r.jsx)("button",{onClick:k,disabled:h||!d.trim(),className:"rounded-xl px-4 py-2 bg-black text-white hover:brightness-110 active:scale-[0.99] disabled:opacity-60",children:h?"…":n("category_select.add")})]}),t&&(0,r.jsx)("div",{className:"pt-1",children:(0,r.jsx)("button",{onClick:N,disabled:x,className:"rounded-xl border px-3 py-2 text-red-600 border-red-500/40 hover:bg-red-50 dark:hover:bg-red-950/30 disabled:opacity-60",children:x?"…":n("category_select.delete")})})]})}function d(e){let{categoryId:t,onCreated:a}=e,[n,i]=(0,l.useState)(""),[c,d]=(0,l.useState)(""),[u,g]=(0,l.useState)(""),[m,h]=(0,l.useState)(!1),[p,x]=(0,l.useState)([]),[b,f]=(0,l.useState)(!1),[y,v]=(0,l.useState)(-1),_=(0,l.useRef)(null),w=(0,l.useRef)(null),k=(0,l.useRef)(null),[N,j]=(0,l.useState)([]),[C,S]=(0,l.useState)(""),[E,D]=(0,l.useState)(!1),{t:B}=(0,o.s)(),z=e=>j(t=>t.filter(t=>t!==e));(0,l.useEffect)(()=>{if(!m||u.trim().length<2){x([]),v(-1);return}let e=u.trim(),t=setTimeout(async()=>{try{var t;null==(t=_.current)||t.abort();let a=new AbortController;_.current=a,f(!0);let r=new URL("https://nominatim.openstreetmap.org/search");r.searchParams.set("q",e),r.searchParams.set("format","json"),r.searchParams.set("addressdetails","1"),r.searchParams.set("limit","8"),r.searchParams.set("accept-language","de"),r.searchParams.set("countrycodes","de,at,ch,lu");let l=await fetch(r.toString(),{signal:a.signal,headers:{"Accept-Language":"de"}});if(!l.ok)throw Error("HTTP ".concat(l.status));let s=(await l.json()).filter(e=>{let t=e.address||{};return t.city||t.town||t.village||t.municipality});x(s.slice(0,5)),v(-1)}catch(e){x([]),v(-1)}finally{f(!1)}},300);return()=>clearTimeout(t)},[u,m]),(0,l.useEffect)(()=>{let e=e=>{w.current&&!w.current.contains(e.target)&&k.current&&!k.current.contains(e.target)&&h(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let I=e=>{let t=e.address||{},a=t.city||t.town||t.village||t.municipality||e.display_name;g(t.country?"".concat(a,", ").concat(t.country):a),x([]),v(-1),h(!1)},K=(0,l.useCallback)(async()=>{let e=n.trim();if(e&&!E){D(!0);try{let{data:r,error:l}=await s.N.from("items").insert({title:e,description:c.trim()||null,place:u.trim()||null,tags:N}).select("id").single();if(l||!r)return;let{error:n}=await s.N.from("item_categories").insert({item_id:r.id,category_id:t});if(n)return;i(""),d(""),g(""),j([]),S(""),a()}finally{D(!1)}}},[n,c,u,N,t,E,a]),M=(0,l.useMemo)(()=>!!n.trim(),[n]);return(0,r.jsxs)("section",{className:"rounded-2xl border bg-white/70 dark:bg-neutral-900/60 backdrop-blur p-4 sm:p-5 shadow-sm space-y-3",children:[(0,r.jsx)("h2",{className:"text-base font-semibold mb-1",children:B("item_create.new_entry")}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:[(0,r.jsx)("input",{"aria-label":B("item_create.title"),value:n,onChange:e=>i(e.target.value),onKeyDown:e=>"Enter"===e.key&&K(),placeholder:B("item_create.title"),className:"rounded-xl border px-3 py-2 bg-white/60 dark:bg-neutral-800/70 outline-none focus:border-neutral-400 dark:focus:border-neutral-600"}),(0,r.jsx)("input",{"aria-label":B("item_create.description"),value:c,onChange:e=>d(e.target.value),onKeyDown:e=>"Enter"===e.key&&K(),placeholder:B("item_create.description"),className:"rounded-xl border px-3 py-2 bg-white/60 dark:bg-neutral-800/70 outline-none focus:border-neutral-400 dark:focus:border-neutral-600"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:[(0,r.jsxs)("div",{className:"relative",ref:w,children:[(0,r.jsx)("input",{ref:k,"aria-label":B("item_create.place_placeholder"),value:u,onChange:e=>g(e.target.value),onFocus:()=>h(!0),onKeyDown:e=>{if(p.length)if("ArrowDown"===e.key)e.preventDefault(),v(e=>(e+1)%p.length);else if("ArrowUp"===e.key)e.preventDefault(),v(e=>e<=0?p.length-1:e-1);else if("Enter"===e.key){e.preventDefault();let t=y>=0?p[y]:p[0];t&&I(t)}else"Escape"===e.key&&(x([]),v(-1),h(!1))},placeholder:B("item_create.place_placeholder"),className:"w-full rounded-xl border px-3 py-2 bg-white/60 dark:bg-neutral-800/70 outline-none focus:border-neutral-400 dark:focus:border-neutral-600",autoComplete:"off"}),m&&(b||p.length>0)&&(0,r.jsxs)("div",{className:"absolute z-50 mt-1 w-full rounded-xl border bg-white dark:bg-neutral-900 shadow-lg overflow-hidden",children:[b&&(0,r.jsx)("div",{className:"px-3 py-2 text-sm opacity-70",children:B("item_create.searching")}),!b&&p.map((e,t)=>{let a=e.address||{},l=a.city||a.town||a.village||a.municipality||e.display_name,s=[a.state,a.country].filter(Boolean).join(", ");return(0,r.jsxs)("button",{type:"button",onMouseDown:e=>e.preventDefault(),onClick:()=>I(e),className:"block w-full text-left px-3 py-2 text-sm hover:bg-neutral-100 dark:hover:bg-neutral-800 ".concat(t===y?"bg-neutral-100 dark:bg-neutral-800":""),children:[(0,r.jsx)("div",{className:"font-medium",children:l}),(0,r.jsx)("div",{className:"opacity-70",children:s})]},e.place_id)}),!b&&0===p.length&&(0,r.jsx)("div",{className:"px-3 py-2 text-sm opacity-70",children:B("item_create.no_results")})]})]}),(0,r.jsxs)("div",{className:"rounded-xl border bg-white/60 dark:bg-neutral-800/70 px-2 py-1 flex flex-wrap items-center gap-1 focus-within:border-neutral-400 dark:focus-within:border-neutral-600",children:[N.map(e=>(0,r.jsxs)("span",{className:"flex items-center gap-1 bg-neutral-200 dark:bg-neutral-700 rounded-full px-2 py-0.5 text-sm",children:[e,(0,r.jsx)("button",{type:"button",onClick:()=>z(e),className:"text-neutral-600 hover:text-neutral-900 dark:text-neutral-300 dark:hover:text-white","aria-label":B("item_create.remove_tag").replace("{tag}",e),children:"\xd7"})]},e)),(0,r.jsx)("input",{value:C,onChange:e=>S(e.target.value),onKeyDown:e=>{if("Enter"===e.key||","===e.key){e.preventDefault();let t=C.trim();!t||N.includes(t)||(j(e=>[...e,t]),S(""))}else"Backspace"===e.key&&!C&&N.length>0&&z(N[N.length-1])},placeholder:0===N.length?B("item_create.tags_placeholder"):"",className:"flex-1 min-w-[100px] bg-transparent outline-none py-1 text-sm"})]})]}),(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsx)("button",{onClick:K,disabled:E||!M,className:"rounded-xl px-4 py-2 bg-black text-white hover:brightness-110 active:scale-[0.99] disabled:opacity-60",children:E?B("item_create.adding"):B("item_create.add")})})]})}var u=a(6766);function g(e){let{categoryId:t}=e,[a,n]=(0,l.useState)([]),[i,c]=(0,l.useState)(1),[d,g]=(0,l.useState)(0),[m,h]=(0,l.useState)(null),[p,x]=(0,l.useState)(null),[b,f]=(0,l.useState)({}),[y,v]=(0,l.useState)(!1),{t:_}=(0,o.s)();(0,l.useEffect)(()=>{s.N.auth.getUser().then(e=>{var t,a;let{data:r}=e;return h(null!=(a=null==(t=r.user)?void 0:t.id)?a:null)})},[]),(0,l.useEffect)(()=>{c(1)},[t]);let w=(0,l.useCallback)(async()=>{v(!0);let e=(i-1)*6,{data:a,error:r,count:l}=await s.N.from("items").select("id,title,description,place,tags,item_categories!inner(category_id)",{count:"exact"}).eq("item_categories.category_id",t).order("created_at",{ascending:!1}).range(e,e+6-1).returns();v(!1),r||(n((null!=a?a:[]).map(e=>{var t,a;return{id:e.id,title:e.title,description:e.description,place:null!=(t=e.place)?t:null,tags:null!=(a=e.tags)?a:[]}})),g(l||0))},[t,i]);(0,l.useEffect)(()=>{w()},[w]);let k=(0,l.useCallback)(async e=>{var t;let{data:a}=await s.N.auth.getUser(),r=null==(t=a.user)?void 0:t.id;if(!r)return;let l="".concat(r,"/").concat(e),{data:n,error:i}=await s.N.storage.from("item-images").list(l,{limit:12,sortBy:{column:"created_at",order:"desc"}});if(i)return;if(!(null==n?void 0:n.length))return void f(t=>({...t,[e]:[]}));let o=n.map(e=>"".concat(l,"/").concat(e.name)),c=await Promise.all(o.map(async e=>{let{data:t,error:a}=await s.N.storage.from("item-images").createSignedUrl(e,3600);return a?"":(null==t?void 0:t.signedUrl)||""}));f(t=>({...t,[e]:c.filter(Boolean)}))},[]),N=(0,l.useCallback)(async e=>{await Promise.all(e.map(e=>k(e)))},[k]);(0,l.useEffect)(()=>{a.length&&m&&N(a.map(e=>e.id))},[a,m,N]);let j=(0,l.useCallback)(async e=>{confirm(_("item_list.confirm_delete"))&&(await s.N.from("items").delete().eq("id",e),await w())},[w,_]),C=(0,l.useCallback)(async(e,t)=>{try{var a;x(e);let{data:r}=await s.N.auth.getUser(),l=null==(a=r.user)?void 0:a.id;if(!l)throw Error(_("item_list.no_user_session"));let n="".concat(l,"/").concat(e,"/").concat(crypto.randomUUID(),"-").concat(t.name),{error:i}=await s.N.storage.from("item-images").upload(n,t);if(i)throw i;await k(e)}catch(e){alert(e instanceof Error?e.message:String(e))}finally{x(null)}},[k,_]),S=(0,l.useMemo)(()=>Math.ceil(d/6),[d]);return(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("ul",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-3",children:a.map(e=>{var t;return(0,r.jsxs)("li",{className:"rounded-2xl border bg-white/70 dark:bg-neutral-900/60 backdrop-blur p-3 shadow-sm space-y-3",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center gap-3",children:[(0,r.jsx)("div",{className:"font-medium truncate",children:e.title}),(0,r.jsx)("button",{onClick:()=>j(e.id),className:"rounded-lg border px-2 py-1 text-red-600 border-red-500/40 hover:bg-red-50 dark:hover:bg-red-950/30",children:_("item_list.delete")})]}),e.description&&(0,r.jsx)("div",{className:"text-sm opacity-80 line-clamp-3",children:e.description}),e.place&&(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm opacity-80",children:[(0,r.jsxs)("svg",{viewBox:"0 0 24 24",className:"w-4 h-4 shrink-0 opacity-80","aria-hidden":"true",children:[(0,r.jsx)("path",{d:"M12 21s-7-6.2-7-11a7 7 0 1 1 14 0c0 4.8-7 11-7 11z",fill:"none",stroke:"currentColor",strokeWidth:"2"}),(0,r.jsx)("circle",{cx:"12",cy:"10",r:"2",fill:"currentColor"})]}),(0,r.jsx)("span",{className:"truncate",children:e.place})]}),Array.isArray(e.tags)&&e.tags.length>0&&(0,r.jsx)("div",{className:"flex flex-wrap gap-1.5",children:e.tags.map(e=>(0,r.jsx)("span",{className:"inline-flex items-center gap-1 bg-neutral-200/80 dark:bg-neutral-700/70 rounded-full px-2 py-0.5 text-xs",children:e},e))}),(0,r.jsx)("div",{className:"flex items-center gap-2",children:(0,r.jsxs)("label",{className:"inline-flex cursor-pointer items-center rounded-xl border px-3 py-2 hover:bg-neutral-50 dark:hover:bg-neutral-800/60 transition",children:[(0,r.jsx)("input",{type:"file",accept:"image/*",className:"hidden",disabled:!m||p===e.id,onChange:t=>{var a;let r=null==(a=t.target.files)?void 0:a[0];r&&(f(t=>({...t,[e.id]:[URL.createObjectURL(r),...t[e.id]||[]]})),C(e.id,r))}}),(0,r.jsx)("span",{className:"text-sm",children:p===e.id?_("item_list.uploading"):_("item_list.add_image")})]})}),(null==(t=b[e.id])?void 0:t.length)?(0,r.jsx)("div",{className:"grid grid-cols-4 gap-2",children:b[e.id].map((e,t)=>(0,r.jsx)(u.default,{src:e,alt:_("item_list.image_alt").replace("{idx}","".concat(t+1)),width:160,height:160,unoptimized:!0,className:"h-20 w-full object-cover rounded-xl"},t))}):(0,r.jsx)("div",{className:"text-sm opacity-60",children:y?_("item_list.loading"):_("item_list.no_images")})]},e.id)})}),S>1&&(0,r.jsxs)("div",{className:"flex flex-wrap gap-2 items-center justify-center",children:[(0,r.jsx)("button",{disabled:1===i,onClick:()=>c(e=>e-1),className:"rounded-xl border px-3 py-1 disabled:opacity-50",children:_("item_list.previous")}),Array.from({length:S},(e,t)=>t+1).map(e=>(0,r.jsx)("button",{onClick:()=>c(e),className:"rounded-xl border px-3 py-1 min-w-9 "+(e===i?"bg-black text-white":"hover:bg-neutral-50 dark:hover:bg-neutral-800/60"),children:e},e)),(0,r.jsx)("button",{disabled:i===S,onClick:()=>c(e=>e+1),className:"rounded-xl border px-3 py-1 disabled:opacity-50",children:_("item_list.next")})]})]})}function m(e){let{user:t,onSignOut:a}=e,[s,n]=(0,l.useState)(!1),i=(0,l.useMemo)(()=>{var e;return((null!=(e=null==t?void 0:t.email)?e:"")||"").slice(0,1).toUpperCase()||"U"},[t]),{t:c}=(0,o.s)();return(0,r.jsx)("header",{className:"sticky top-0 z-40 backdrop-blur supports-[backdrop-filter]:bg-white/40 dark:supports-[backdrop-filter]:bg-neutral-900/70 border-b border-black/5 dark:border-white/10",children:(0,r.jsxs)("div",{className:"mx-auto max-w-3xl px-4 py-3 flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(u.default,{src:"/logo.png",alt:c("header.title"),width:28,height:28,className:"object-contain",priority:!0}),(0,r.jsx)("span",{className:"font-semibold tracking-tight",children:c("header.title")})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("button",{onClick:()=>n(e=>!e),className:"group flex items-center gap-2 rounded-xl px-2.5 py-1.5 bg-white/70 dark:bg-neutral-900/60 border border-black/10 dark:border-white/10 shadow-sm hover:shadow transition",children:[(0,r.jsx)("span",{className:"h-6 w-6 rounded-full bg-gradient-to-br from-stone-200 to-stone-100 dark:from-neutral-800 dark:to-neutral-700 grid place-items-center text-xs font-semibold",children:i}),(0,r.jsx)("span",{className:"text-sm opacity-80 max-sm:hidden",children:t.email}),(0,r.jsx)("span",{className:"text-xs opacity-60 group-hover:opacity-100",children:"▾"})]}),s&&(0,r.jsxs)("div",{role:"menu",className:"absolute right-0 mt-2 w-56 rounded-xl border border-black/10 dark:border-white/10 bg-white/90 dark:bg-neutral-900/90 backdrop-blur p-1 shadow-lg",children:[(0,r.jsx)("div",{className:"px-3 py-2 text-xs opacity-70 truncate",children:t.email}),(0,r.jsx)("button",{onClick:a,className:"w-full text-left px-3 py-2 rounded-lg hover:bg-stone-100 dark:hover:bg-neutral-800 text-sm",children:c("header.sign_out")})]})]})]})})}function h(){let{user:e,loading:t}=function(){let e=(0,n.useRouter)(),[t,a]=(0,l.useState)(null),[r,i]=(0,l.useState)(!0);return(0,l.useEffect)(()=>{let t=!0,r=r=>{var l;if(!t)return;let s=null!=(l=null==r?void 0:r.user)?l:null;a(s),i(!1),s||e.replace("/login")};s.N.auth.getSession().then(e=>{let{data:t}=e;return r(t.session)});let{data:l}=s.N.auth.onAuthStateChange((e,t)=>r(t));return()=>{t=!1,l.subscription.unsubscribe()}},[e]),{user:t,loading:r}}(),[a,u]=(0,l.useState)(null),[h,p]=(0,l.useState)(0),{t:x}=(0,o.s)(),b=(0,l.useCallback)(async()=>{await s.N.auth.signOut()},[]);return t?(0,r.jsx)(i.A,{}):e?(0,r.jsxs)("div",{className:"min-h-[100dvh] bg-gradient-to-b from-amber-50 via-white to-stone-50 dark:from-neutral-950 dark:via-neutral-950 dark:to-neutral-900 text-neutral-900 dark:text-neutral-100",children:[(0,r.jsx)(m,{user:e,onSignOut:b}),(0,r.jsxs)("main",{className:"mx-auto max-w-3xl px-4 py-6 sm:py-8 space-y-6",children:[(0,r.jsx)(c,{selectedCat:a,onSelect:u}),a?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d,{categoryId:a,onCreated:()=>p(e=>e+1)}),(0,r.jsxs)("section",{className:"rounded-2xl border bg-white/70 dark:bg-neutral-900/60 backdrop-blur shadow-sm p-4 sm:p-5",children:[(0,r.jsx)("h2",{className:"text-base font-semibold mb-3",children:x("page.entries")}),(0,r.jsx)(g,{categoryId:a},h)]})]}):(0,r.jsx)("section",{className:"rounded-2xl border bg-white/70 dark:bg-neutral-900/60 backdrop-blur shadow-sm p-10 grid place-items-center text-center",children:(0,r.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,r.jsx)("div",{className:"h-16 w-16 rounded-full bg-amber-500/90 ring-8 ring-amber-200/40 dark:ring-amber-900/20 grid place-items-center text-3xl",children:"\uD83E\uDDFA"}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold",children:x("page.choose_category")}),(0,r.jsx)("p",{className:"text-sm opacity-70",children:x("page.add_collectibles")})]})]})})]}),(0,r.jsx)("footer",{className:"px-4 py-8 text-center text-xs opacity-60",children:x("page.footer")})]}):null}},2184:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});var r=a(5155);function l(e){let{label:t="Wird geladen..."}=e;return(0,r.jsxs)("div",{className:"fixed inset-0 z-50 flex flex-col items-center justify-center gap-3 bg-black/60 backdrop-blur-sm",children:[(0,r.jsx)("div",{className:"animate-spin h-8 w-8 rounded-full border-2 border-white/80 border-t-transparent"}),(0,r.jsx)("span",{className:"text-white text-lg font-medium",children:t})]})}},5875:(e,t,a)=>{"use strict";a.d(t,{s:()=>s});var r=a(2115),l=a(101);let s=()=>{let e=(0,r.useContext)(l.g);if(!e)throw Error("useI18n must be used within an I18nProvider");return e}},5983:(e,t,a)=>{"use strict";a.d(t,{N:()=>r});let r=(0,a(2354).UU)("https://mopbqdyfjvdfpffhetyf.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1vcGJxZHlmanZkZnBmZmhldHlmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ4MzQ2NDUsImV4cCI6MjA3MDQxMDY0NX0.qtzuwQn1QB3tOtN2u7mnEigMa2VBIyAxu_eU6cEXc68")},6561:(e,t,a)=>{Promise.resolve().then(a.bind(a,1915))}},e=>{e.O(0,[192,766,441,964,358],()=>e(e.s=6561)),_N_E=e.O()}]);